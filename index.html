<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Für Dich</title>
<style>
html,body{
    margin:0;
    padding:0;
    overflow:hidden;
    background:black;
}
canvas{
    position:absolute;
    top:0;
    left:0;
}
#lock{
    position:absolute;
    inset:0;
    background:black;
    display:flex;
    justify-content:center;
    align-items:center;
    flex-direction:column;
    color:white;
    z-index:10;
}
input{
    padding:10px;
    font-size:18px;
    border-radius:8px;
    border:none;
}
button{
    margin-top:10px;
    padding:8px 16px;
    border:none;
    border-radius:8px;
    background:#ff4da6;
    color:white;
}
#textSampler{
    position:absolute;
    visibility:hidden;
    white-space:nowrap;
    font-size:80px;
    font-family:serif;
}
</style>
</head>
<body>

<div id="lock">
    <div>Passwort eingeben</div>
    <input id="pw" type="password">
    <button onclick="checkPw()">Öffnen</button>
</div>

<div id="textSampler"></div>
<canvas id="c"></canvas>

<script>
const PASSWORD="13.12";

const canvas=document.getElementById("c");
const ctx=canvas.getContext("2d");
const sampler=document.getElementById("textSampler");

let w,h;
function resize(){
    w=canvas.width=window.innerWidth;
    h=canvas.height=window.innerHeight;
}
resize();
window.addEventListener("resize",resize);

function checkPw(){
    if(document.getElementById("pw").value===PASSWORD){
        document.getElementById("lock").style.display="none";
        start();
    }
}

let particles=[];
let sentenceIndex=0;
let finalPhase=false;

const sentences=[
"Seit du da bist,",
"fühlt sich alles heller an.",
"Du bist mein Ruhepunkt.",
"Ich liebe dich."
];

class Particle{
    constructor(){
        this.x=Math.random()*w;
        this.y=Math.random()*h;
        this.tx=this.x;
        this.ty=this.y;
        this.vx=0;
        this.vy=0;
    }
    update(){
        this.vx+=(this.tx-this.x)*0.02;
        this.vy+=(this.ty-this.y)*0.02;
        this.vx*=0.9;
        this.vy*=0.9;
        this.x+=this.vx;
        this.y+=this.vy;
    }
    draw(){
        ctx.beginPath();
        ctx.arc(this.x,this.y,2,0,Math.PI*2);
        ctx.fillStyle="white";
        ctx.fill();
    }
}

function initParticles(){
    particles=[];
    for(let i=0;i<400;i++){
        particles.push(new Particle());
    }
}

function textToPoints(text){
    sampler.innerText=text;
    sampler.style.fontSize = Math.floor(w/10)+"px";

    const rect=sampler.getBoundingClientRect();

    let points=[];
    for(let i=0;i<particles.length;i++){
        let x = w/2 - rect.width/2 + Math.random()*rect.width;
        let y = h/2 - rect.height/2 + Math.random()*rect.height;
        points.push({x,y});
    }
    return points;
}

function morphTo(text){
    let pts=textToPoints(text);
    particles.forEach((p,i)=>{
        p.tx=pts[i].x;
        p.ty=pts[i].y;
    });
}

function heartPoints(){
    let pts=[];
    for(let t=0;t<Math.PI*2;t+=0.04){
        let x=16*Math.pow(Math.sin(t),3);
        let y=13*Math.cos(t)-5*Math.cos(2*t)-2*Math.cos(3*t)-Math.cos(4*t);
        pts.push({
            x:w/2+x*15,
            y:h/2-y*15
        });
    }
    return pts;
}

function explodeToHeart(){
    let pts=heartPoints();
    particles.forEach((p,i)=>{
        let pt=pts[i%pts.length];
        p.tx=pt.x;
        p.ty=pt.y;
    });

    setTimeout(()=>{
        morphTo("V ♥ S");
    },2000);
}

canvas.addEventListener("click",()=>{
    if(finalPhase) return;

    if(sentenceIndex < sentences.length){
        morphTo(sentences[sentenceIndex]);
        sentenceIndex++;
    }else{
        finalPhase=true;
        explodeToHeart();
    }
});

function drawBackground(){
    let grad=ctx.createRadialGradient(w/2,h,100,w/2,h,h);
    grad.addColorStop(0,"#1b0033");
    grad.addColorStop(1,"#000010");
    ctx.fillStyle=grad;
    ctx.fillRect(0,0,w,h);
}

function animate(){
    drawBackground();
    particles.forEach(p=>{
        p.update();
        p.draw();
    });
    requestAnimationFrame(animate);
}

function start(){
    initParticles();
    animate();
}
</script>
</body>
</html>