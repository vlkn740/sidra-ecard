<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>13.12</title>
<link href="https://fonts.googleapis.com/css2?family=Great+Vibes&display=swap" rel="stylesheet">
<style>
body{
margin:0;
overflow:hidden;
background:black;
font-family:'Great Vibes',cursive;
}
canvas{
position:fixed;
top:0;
left:0;
}
#text{
position:absolute;
top:50%;
left:50%;
transform:translate(-50%,-50%) scale(1);
font-size:4rem;
opacity:0;
color:white;
text-align:center;
text-shadow:0 0 50px hotpink;
transition:opacity 2.5s ease, transform 2.5s ease;
pointer-events:none;
}
</style>
</head>
<body>

<canvas id="c"></canvas>
<div id="text"></div>

<script>
const canvas=document.getElementById("c");
const ctx=canvas.getContext("2d");
canvas.width=innerWidth;
canvas.height=innerHeight;

let speed=3;
let state="warp";
let textIndex=0;
let textVisible=false;
let stars=[];

/* STORY */
const story=[
"Es begann mit einem Moment.",
"Ein Blick.",
"Ein Gefühl.",
"Seit dem 13.12.",
"Fliege ich nicht mehr allein."
];

/* WARP STARS */
for(let i=0;i<1000;i++){
stars.push({
x:(Math.random()-0.5)*canvas.width,
y:(Math.random()-0.5)*canvas.height,
z:Math.random()*canvas.width
});
}

function drawWarp(){
stars.forEach(s=>{
s.z-=speed;
if(s.z<=0) s.z=canvas.width;

let k=128/s.z;
let px=s.x*k+canvas.width/2;
let py=s.y*k+canvas.height/2;
let size=(1-s.z/canvas.width)*3;

if(state==="heartStars"){
    if(Math.random()>0.5){
        ctx.fillStyle="rgba(255,105,180,0.95)";
    }else{
        ctx.fillStyle="white";
    }
}else{
    ctx.fillStyle="white";
}

ctx.fillRect(px,py,size,size);
});
}

/* MAIN LOOP */
function animate(){
ctx.fillStyle="black";
ctx.fillRect(0,0,canvas.width,canvas.height);

if(state==="warp" || state==="finalWarp" || state==="heartStars"){
drawWarp();
}

requestAnimationFrame(animate);
}
animate();

/* CLICK */
document.addEventListener("click",()=>{
let t=document.getElementById("text");

if(textIndex < story.length){

if(!textVisible){
speed+=0.5;
t.innerHTML=story[textIndex];
t.style.opacity=1;
t.style.transform="translate(-50%,-50%) scale(1.15)";
textVisible=true;
}else{
t.style.opacity=0;
t.style.transform="translate(-50%,-50%) scale(1)";
setTimeout(()=>{
textIndex++;
textVisible=false;
},1200);
}

}else if(state==="warp" && !textVisible){
startFinal();
}
});

/* FINAL */
function startFinal(){
state="finalWarp";
let acc=setInterval(()=>{
speed+=2;
if(speed>60){
clearInterval(acc);
formHeart();
}
},100);
}

/* HEART FORMATION – MEHR STERNE */
function formHeart(){
speed=0.5;
stars=[];

for(let i=0;i<4000;i++){  // ← hier erhöht
let t=Math.random()*Math.PI*2;
let x=16*Math.pow(Math.sin(t),3);
let y=-(13*Math.cos(t)-5*Math.cos(2*t)-2*Math.cos(3*t)-Math.cos(4*t));

stars.push({
x:x*20,
y:y*20,
z:Math.random()*200+200
});
}

state="heartStars";
showFinal();
}

/* FINAL TEXT */
function showFinal(){
let t=document.getElementById("text");
t.innerHTML="Du bist mein Universum.";
t.style.opacity=1;
t.style.transform="translate(-50%,-50%) scale(1.1)";
}
</script>
</body>
</html>